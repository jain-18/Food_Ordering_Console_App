package com.foodapp.AfterLogin.admin;

public class MenuDAO {
	public class MenuDAO {
		public List<MenuItem> findAll() {
	        List<MenuItem> items = new ArrayList<>();
	        String sql = "SELECT * FROM menu";

	        try (Connection conn = DBConnection.getConnection(); Statement stmt = conn.createStatement()) {
	            ResultSet rs = stmt.executeQuery(sql);
	            while (rs.next()) {
	                items.add(new MenuItem(
	                    rs.getInt("id"),
	                    rs.getString("name"),
	                    rs.getDouble("price")
	                ));
	            }
	        } catch (SQLException e) {
	            e.printStackTrace();
	        }
	        return items;
	    }

	    public void addItem(MenuItem item) {
	        String sql = "INSERT INTO menu (name, price) VALUES (?, ?)";
	        try (Connection conn = DBConnection.getConnection(); PreparedStatement stmt = conn.prepareStatement(sql)) {
	            stmt.setString(1, item.getName());
	            stmt.setDouble(2, item.getPrice());
	            stmt.executeUpdate();
	        } catch (SQLException e) {
	            e.printStackTrace();
	        }
	    }

	    public void deleteItem(int id) {
	        String sql = "DELETE FROM menu WHERE id = ?";
	        try (Connection conn = DBConnection.getConnection(); PreparedStatement stmt = conn.prepareStatement(sql)) {
	            stmt.setInt(1, id);
	            stmt.executeUpdate();
	        } catch (SQLException e) {
	            e.printStackTrace();
	        }
	    }
	}
}
